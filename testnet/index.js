var LT;(()=>{"use strict";function e(e){return Array.from((new TextEncoder).encode(e),(e=>e.toString(16).padStart(2,"0"))).join("")}function t(e){const t=new Uint8Array(e.length/2);for(let r=0;r!==t.length;r++)t[r]=parseInt(e.substr(2*r,2),16);return(new TextDecoder).decode(t)}function r(e){return e&&e.length>14?e.substring(0,5)+"..."+e.substring(e.length-5):e}function i(e){if(navigator.clipboard)return navigator.clipboard.writeText(e).then((function(){}),(function(e){return!1})),!0;let t=!1;var r=document.createElement("textarea");r.value=e,r.style.top="0",r.style.left="0",r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{document.execCommand("copy"),t=!0}catch(e){}return document.body.removeChild(r),t}function a(e){return/^(tz|KT)[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{34}$/.test(String(e))}function n(){try{return(new Error).stack.split("\n")[2].replace(/^\s+at\s+(.+?)\s.+/g,"$1")}catch(e){return""}}const s=window.location,o=!s.protocol.startsWith("http"),m=o||(s.host+s.pathname).indexOf("testnet")<0&&(s.host+s.pathname).indexOf("ghostnet")<0,c=m?"mainnet":"ghostnet",d=m?"KT1ULc5LQazQorDUjacBieq5puEGFQZ6jorT":"KT1VCnPM6SKpvza6TLkbNcoxAgS6B61JLGtE",l=m?"KT1KyPvhak54X3yiozebqhPhnqrtWNTiaWm1":"KT1TRuN4Uc4ai6ZjWRjtedX9ChmfcfvxfBXt",p="-1835576114,-1513923773,-1889653220,-543526052,943737041",g='{"code":[{"prim":"storage","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address","annots":["%administrator"]},{"prim":"pair","args":[{"prim":"nat","annots":["%all_tokens"]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}],"annots":["%ledger"]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%metadata"]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}]},{"prim":"unit"}],"annots":["%operators"]}]},{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"nat"},{"prim":"pair","args":[{"prim":"nat","annots":["%token_id"]},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%token_info"]}]}],"annots":["%token_metadata"]},{"prim":"big_map","args":[{"prim":"nat"},{"prim":"nat"}],"annots":["%total_supply"]}]}]}]}]},{"prim":"parameter","args":[{"prim":"or","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%requests"]},{"prim":"contract","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"nat","annots":["%token_id"]}],"annots":["%request"]},{"prim":"nat","annots":["%balance"]}]}]}],"annots":["%callback"]}],"annots":["%balance_of"]},{"prim":"pair","args":[{"prim":"nat","annots":["%amount"]},{"prim":"nat","annots":["%token_id"]}],"annots":["%burn"]}]},{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address","annots":["%address"]},{"prim":"pair","args":[{"prim":"nat","annots":["%amount"]},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}],"annots":["%metadata"]}]}],"annots":["%mint"]},{"prim":"or","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%from_"]},{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address","annots":["%to_"]},{"prim":"pair","args":[{"prim":"nat","annots":["%token_id"]},{"prim":"nat","annots":["%amount"]}]}]}],"annots":["%txs"]}]}],"annots":["%transfer"]},{"prim":"list","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%add_operator"]},{"prim":"pair","args":[{"prim":"address","annots":["%owner"]},{"prim":"pair","args":[{"prim":"address","annots":["%operator"]},{"prim":"nat","annots":["%token_id"]}]}],"annots":["%remove_operator"]}]}],"annots":["%update_operators"]}]}]}]}]},{"prim":"code","args":[[{"prim":"CAST","args":[{"prim":"pair","args":[{"prim":"or","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"contract","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}]}]}]}]},{"prim":"pair","args":[{"prim":"nat"},{"prim":"nat"}]}]},{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"or","args":[{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"list","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"nat"}]}]}]}]}]},{"prim":"list","args":[{"prim":"or","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]}]}]}]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]},{"prim":"nat"}]}]}]},{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"string"},{"prim":"bytes"}]},{"prim":"big_map","args":[{"prim":"pair","args":[{"prim":"address"},{"prim":"pair","args":[{"prim":"address"},{"prim":"nat"}]}]},{"prim":"unit"}]}]},{"prim":"pair","args":[{"prim":"big_map","args":[{"prim":"nat"},{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"big_map","args":[{"prim":"nat"},{"prim":"nat"}]}]}]}]}]}]},{"prim":"UNPAIR"},{"prim":"IF_LEFT","args":[[{"prim":"IF_LEFT","args":[[{"prim":"DUP"},{"prim":"CAR"},{"prim":"MAP","args":[[{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"MEM"},{"prim":"IF","args":[[{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"434"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SWAP"},{"prim":"PAIR"}],[{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"SWAP"},{"prim":"PAIR"}]]}]]},{"prim":"NIL","args":[{"prim":"operation"}]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"PUSH","args":[{"prim":"mutez"},{"int":"0"}]},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"TRANSFER_TOKENS"},{"prim":"CONS"}],[{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CDR"},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CDR"},{"prim":"SENDER"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_INSUFFICIENT_BALANCE"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"CDR"},{"prim":"SENDER"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CDR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"538"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"538"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"CDR"},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"6"}]},{"prim":"SWAP"},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"539"}]},{"prim":"FAILWITH"}],[]]},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"5"}]},{"prim":"NONE","args":[{"prim":"pair","args":[{"prim":"nat"},{"prim":"map","args":[{"prim":"string"},{"prim":"bytes"}]}]}]},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"5"}]}],[{"prim":"DROP"}]]},{"prim":"NIL","args":[{"prim":"operation"}]}]]}],[{"prim":"IF_LEFT","args":[[{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"CAR"},{"prim":"SENDER"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_ADMIN"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"PAIR"},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"5"}]},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"6"}]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SOME"},{"prim":"DIG","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"UPDATE","args":[{"int":"6"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"1"}]},{"prim":"ADD"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"}],[{"prim":"IF_LEFT","args":[[{"prim":"DUP"},{"prim":"ITER","args":[[{"prim":"DUP"},{"prim":"CDR"},{"prim":"ITER","args":[[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[{"prim":"PUSH","args":[{"prim":"bool"},{"prim":"True"}]}],[{"prim":"DUP","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"CDR"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"MEM"}]]},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OPERATOR"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"GET","args":[{"int":"5"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"MEM"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_TOKEN_UNDEFINED"}]},{"prim":"FAILWITH"}]]},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"0"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"COMPARE"},{"prim":"GT"},{"prim":"IF","args":[[{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"414"}]},{"prim":"FAILWITH"}],[]]},{"prim":"COMPARE"},{"prim":"GE"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_INSUFFICIENT_BALANCE"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[]]},{"prim":"SUB"},{"prim":"ISNAT"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[]]},{"prim":"DIG","args":[{"int":"4"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"9"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"DUP"},{"prim":"DUG","args":[{"int":"2"}]},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"418"}]},{"prim":"FAILWITH"}],[{"prim":"DROP"}]]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"SOME"},{"prim":"SWAP"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"4"}]},{"prim":"CAR"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"3"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"MEM"},{"prim":"IF","args":[[{"prim":"DIG","args":[{"int":"3"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DUP","args":[{"int":"7"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"DUP"},{"prim":"DUG","args":[{"int":"2"}]},{"prim":"GET"},{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"421"}]},{"prim":"FAILWITH"}],[]]},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"ADD"},{"prim":"SOME"},{"prim":"SWAP"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"2"}]}],[{"prim":"DIG","args":[{"int":"3"}]},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"DUP","args":[{"int":"5"}]},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SOME"},{"prim":"DUP","args":[{"int":"6"}]},{"prim":"GET","args":[{"int":"3"}]},{"prim":"DIG","args":[{"int":"6"}]},{"prim":"CAR"},{"prim":"PAIR"},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"DUG","args":[{"int":"2"}]}]]}],[{"prim":"DROP"}]]}]]},{"prim":"DROP"}]]},{"prim":"DROP"}],[{"prim":"DUP"},{"prim":"ITER","args":[[{"prim":"IF_LEFT","args":[[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OWNER"}]},{"prim":"FAILWITH"}]]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"PUSH","args":[{"prim":"option","args":[{"prim":"unit"}]},{"prim":"Some","args":[{"prim":"Unit"}]}]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SWAP"},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"}],[{"prim":"SENDER"},{"prim":"DUP","args":[{"int":"2"}]},{"prim":"CAR"},{"prim":"COMPARE"},{"prim":"EQ"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"FA2_NOT_OWNER"}]},{"prim":"FAILWITH"}]]},{"prim":"DIG","args":[{"int":"2"}]},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"UNPAIR"},{"prim":"UNPAIR"},{"prim":"SWAP"},{"prim":"NONE","args":[{"prim":"unit"}]},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"DUP"},{"prim":"GET","args":[{"int":"4"}]},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"GET","args":[{"int":"3"}]},{"prim":"SWAP"},{"prim":"CAR"},{"prim":"PAIR","args":[{"int":"3"}]},{"prim":"UPDATE"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"PAIR"},{"prim":"SWAP"},{"prim":"PAIR"},{"prim":"SWAP"}]]}]]},{"prim":"DROP"}]]}]]},{"prim":"NIL","args":[{"prim":"operation"}]}]]},{"prim":"PAIR"}]]}],"storage":{"prim":"Pair","args":[{"prim":"Pair","args":[{"string":"${user_address}"},{"prim":"Pair","args":[{"int":"0"},[]]}]},{"prim":"Pair","args":[{"prim":"Pair","args":[[{"prim":"Elt","args":[{"string":""},{"bytes":"74657a6f732d73746f726167653a636f6e74656e74"}]},{"prim":"Elt","args":[{"string":"content"},{"bytes":"${metadata_content}"}]}],[]]},{"prim":"Pair","args":[[],[]]}]}]}}',u="ZeroTerminal";let y,f="";async function v(e,t,r){let i="sort.desc=lastActivity&select=address,tokensCount,firstActivityTime,creator&typeHash"+(p.indexOf(",")>=0?".in":"")+"="+p+(e?"&creator="+e:"&tokensCount.gt=0")+(t?"&limit="+t:"")+(r?"&offset="+r:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts?"+i);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get collections")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}async function h(e){try{let t=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+e+"/bigmaps/metadata/keys?key=content&select=value");if(t.ok)return(await t.json())[0];console.log("ERROR "+n()+"(): can't get collection metadata")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}async function E(e,t){let r="sort.desc=id&active=true&select=key,value"+(e?"&value.token.address="+e:"")+(t?"&value.token.id="+t:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+l+"/bigmaps/offers/keys?"+r);if(e.ok){let t=await e.json();if(t&&t.length>0){let e=null;for(let r of t)r.value.seller!==f&&(e?Number(e.value.price)>=Number(r.value.price)&&(e=r):e=r);return e}}else console.log("ERROR "+n()+"(): can't get best offer")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}async function I(e,t){let r="limit=1&select=account.address as account,token,balance,firstTime&token.contract="+e+"&token.tokenid="+t;try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+r+"&account="+f);if(e.ok){let t=await e.json();if(t.length>0)return t[0];{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+r);if(e.ok){if(t=await e.json(),t.length>0)return t[0].account=f,t[0].balance=0,t[0]}else console.log("ERROR "+n()+"(): can't get token")}}else console.log("ERROR "+n()+"(): can't get token balance")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}const T={message:"The address is copied",type:"is-success"};async function S(){document.getElementById("btnMoreActiveTokens").classList.add("is-loading");let e=document.getElementById("dActiveTokens"),t=0,r=new URLSearchParams(window.location.search),i=await async function(e){let t="sort.desc=lastActivity&select=contract,tokenId,totalSupply,firstMinter,metadata&totalSupply.gt=0&standard=fa2"+(e.limit?"&limit="+e.limit:"")+(e.offset?"&offset="+e.offset:"")+(e.onchain?"&metadata.artifactUri.as=data:"+(e.type?e.type:"")+"*":"&metadata.artifactUri.null=false");try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens?"+t);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get tokens")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}({limit:20,offset:L,onchain:"false"!==r.get("onchain")});if(document.getElementById("dActiveTokensLoader").classList.add("is-hidden"),i){for(let r of i){t++;let i=r.token?r.token:r,a=await R(i);a&&e.append(a)}t<20?document.getElementById("dMoreActiveTokens").classList.add("is-hidden"):document.getElementById("dMoreActiveTokens").classList.remove("is-hidden"),document.getElementById("btnMoreActiveTokens").classList.remove("is-loading"),0===(L+=t)&&(e.textContent="There are no on-chain tokens yet.")}else x()}document.addEventListener("DOMContentLoaded",(async function(){document.getElementById("appTitle").prepend(document.createTextNode(u)),document.getElementById("appLogo").setAttribute("alt",u),document.getElementById("appVersion").append(document.createTextNode("v1.06")),o&&document.getElementById("btnMenuConfig").classList.add("is-hidden"),"mainnet"===c?(document.getElementById("iconMainnetNotActive").classList.add("is-hidden"),document.getElementById("iconMainnetActive").classList.remove("is-hidden"),document.getElementById("iconTestnetActive").classList.add("is-hidden"),document.getElementById("iconTestnetNotActive").classList.remove("is-hidden")):(document.getElementById("titleNetwork").innerHTML="&nbsp;testnet",document.getElementById("titleNetwork").classList.remove("is-hidden"),document.getElementById("iconMainnetActive").classList.add("is-hidden"),document.getElementById("iconMainnetNotActive").classList.remove("is-hidden"),document.getElementById("iconTestnetNotActive").classList.add("is-hidden"),document.getElementById("iconTestnetActive").classList.remove("is-hidden")),bulmaToast.setDefaults({duration:5e3,position:"bottom-left",animate:{in:"zoomIn",out:"zoomOut"}}),y=new beacon.DAppClient({name:u,network:{type:c,rpcUrl:"https://rpc.tzkt.io/"+c}}),y.subscribeToEvent(beacon.BeaconEvent.ACTIVE_ACCOUNT_SET,(e=>{})),await O(!0);let e=new URLSearchParams(window.location.search).get("cmd");"tokens"===e?await async function(){C(),document.getElementById("dTokens").innerHTML="",document.getElementById("pageTokens").classList.remove("is-hidden");let e=new URLSearchParams(window.location.search).get("cid");e&&(b=e),await k()}():"token"===e?await async function(){C();let e=document.getElementById("btnTokenBuy"),t=document.getElementById("btnTokenList");t.classList.add("is-hidden");let a=document.getElementById("btnTokenBurn");a.classList.add("is-hidden");let n=document.getElementById("btnTokenTransfer");n.classList.add("is-hidden"),document.getElementById("dToken").classList.add("is-hidden"),document.getElementById("pageToken").classList.remove("is-hidden");let s=new URLSearchParams(window.location.search),o=s.get("cid");o?b=o:o=b;let m=s.get("tid");m?j=m:m=j;let c,d=document.getElementById("pageToken"),l=await I(b,m);if(l){let s;if(U=l,l.account===f&&l.balance>0&&(t.classList.remove("is-hidden"),a.classList.remove("is-hidden"),n.classList.remove("is-hidden")),new Promise((t=>{setTimeout((()=>{t(Promise.all([E(l.token.contract.address,l.token.tokenId),e]))}),10)})).then((e=>{e[0]&&(e[1].append(document.createTextNode((parseFloat(e[0].value.price)/1e6).toFixed(2)+" êœ©")),e[1].addEventListener("click",(()=>q(e[0].key,e[0].value.price))),e[1].removeAttribute("disabled"))})),c=l.token.metadata?.name,d.querySelector(".js-name").innerText=c||"",c=l.token.metadata?.description,d.querySelector(".js-description").innerText=c||"",c=l.token.metadata?.creators,!Array.isArray(c))try{c=JSON.parse(c)}catch(e){}let o=d.querySelector(".js-creators");if(Array.isArray(c)&&c.length>0){let e=d.querySelector(".js-creator");for(let t=0;t<c.length;t++){let i=c[t];s=e.cloneNode(!0),s.setAttribute("href",window.location.pathname+"?cmd=tokens&creator="+i),s.append(document.createTextNode(r(i))),s.classList.remove("is-hidden"),o.append(s),o.append(document.createElement("br"))}}else o.innerText="";c=f&&f===l.account?l.balance:"",d.querySelector(".js-balance").innerText=c||"",c=l.token.totalSupply,d.querySelector(".js-editions").innerText=c||"",c=l.firstTime,d.querySelector(".js-firsttime").innerText=c?new Date(Date.parse(c)).toLocaleString():"";let m=l.token.contract.address;s=d.querySelector(".js-contract"),s.setAttribute("href",window.location.pathname+"?cmd=tokens&cid="+m),s.append(document.createTextNode(r(m))),d.querySelector(".js-contract-copy").addEventListener("click",(()=>{m&&i(m)&&bulmaToast.toast(T)})),c=l.token.tokenId,d.querySelector(".js-tokenid").innerText=c||"";let p=d.querySelector(".tags"),g=p.querySelector(".tag");c=l.token.metadata?.tags;try{c=JSON.parse(c);for(let e=0;e<c.length;e++)s=g.cloneNode(!0),s.append(document.createTextNode(c[e])),s.setAttribute("href",window.location.pathname+"?cmd=tokens&tag="+c[e]),s.classList.remove("is-hidden"),p.append(s)}catch(e){p.innerText=""}let u=l.token.metadata?.mimeType;if(d.querySelector(".js-type").innerText=u||"",c=l.token.metadata?.displayUri?l.token.metadata?.displayUri:l.token.metadata?.thumbnailUri?l.token.metadata?.thumbnailUri:l.token.metadata?.artifactUri,c){try{new URL(c),c=c.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}u=M(c),u||(u=l.token.metadata?.mimeType),u?u.startsWith("image")?(d.querySelector(".js-container-audio").remove(),d.querySelector(".js-container-video").remove(),d.querySelector(".js-container-text").remove(),d.querySelector(".js-container-data").remove(),u.startsWith("image/svg+xml")?(d.querySelector(".js-img").remove(),d.querySelector(".js-svg").setAttribute("data",c)):(d.querySelector(".js-svg").remove(),d.querySelector(".js-img").setAttribute("src",c)),d.querySelector(".js-container-img").classList.remove("is-hidden")):u.startsWith("audio")?(d.querySelector(".js-container-img").remove(),d.querySelector(".js-container-video").remove(),d.querySelector(".js-container-text").remove(),d.querySelector(".js-container-data").remove(),d.querySelector(".js-audio").setAttribute("src",c),d.querySelector(".js-container-audio").classList.remove("is-hidden")):u.startsWith("video")?(d.querySelector(".js-container-img").remove(),d.querySelector(".js-container-audio").remove(),d.querySelector(".js-container-text").remove(),d.querySelector(".js-container-data").remove(),d.querySelector(".js-video").setAttribute("src",c),d.querySelector(".js-container-video").classList.remove("is-hidden")):u.startsWith("text")?(d.querySelector(".js-container-audio").remove(),d.querySelector(".js-container-video").remove(),d.querySelector(".js-container-img").remove(),d.querySelector(".js-container-data").remove(),d.querySelector(".js-container-text").classList.remove("is-hidden")):(d.querySelector(".js-container-audio").remove(),d.querySelector(".js-container-video").remove(),d.querySelector(".js-container-img").remove(),d.querySelector(".js-container-text").remove(),d.querySelector(".js-container-data").classList.remove("is-hidden")):(d.querySelector(".js-container-audio").remove(),d.querySelector(".js-container-video").remove(),d.querySelector(".js-container-text").remove(),d.querySelector(".js-container-data").remove(),d.querySelector(".js-svg").remove(),d.querySelector(".js-img").setAttribute("src",c),d.querySelector(".js-container-img").classList.remove("is-hidden"))}document.getElementById("dToken").classList.remove("is-hidden")}}():"newtoken"===e?await async function(){if(C(),f?document.getElementById("btnNewTokenCreate").removeAttribute("disabled"):(document.getElementById("btnNewTokenCreate").setAttribute("disabled",""),bulmaToast.toast({message:"To create a new token you need to connect wallet.",type:"is-danger"})),document.getElementById("nftCreators").value=f,document.getElementById("pageNewToken").classList.remove("is-hidden"),f){const e=document.getElementById("nftCollection");let r=document.createElement("option");r.setAttribute("value",d),r.append(document.createTextNode("- ZeroTerminal collection -")),e.append(r),e.parentNode.classList.add("is-loading");let i=await v(f,15,A);if(i)for(let a of i){let i=await h(a.address);if(i)try{i=JSON.parse(t(i))}catch(e){continue}r=document.createElement("option"),r.setAttribute("value",a.address),r.append(document.createTextNode(i?.name)),e.append(r)}e.parentNode.classList.remove("is-loading")}}():"collections"===e?await async function(){C(),document.getElementById("dCollections").innerHTML="",document.getElementById("pageCollections").classList.remove("is-hidden"),await P()}():"newcollection"===e?await async function(){C(),f?document.getElementById("btnNewCollectionCreate").removeAttribute("disabled"):(document.getElementById("btnNewCollectionCreate").setAttribute("disabled",""),bulmaToast.toast({message:"To create a new collection you need to connect wallet.",type:"is-danger"})),document.getElementById("cCreators").value=f,document.getElementById("pageNewCollection").classList.remove("is-hidden")}():"listings"===e?await async function(){C(),document.getElementById("dListings").innerHTML="",document.getElementById("pageListings").classList.remove("is-hidden"),await B()}():"search"===e?await async function(){C(),document.getElementById("pageSearch").classList.remove("is-hidden")}():"info"===e?await(document.getElementById("btnBurger").classList.remove("is-active"),document.getElementById("navbarMenu").classList.remove("is-active"),C(),void document.getElementById("pageInfo").classList.remove("is-hidden")):await async function(){C(),document.getElementById("dActiveTokens").innerHTML="",document.getElementById("pageActiveTokens").classList.remove("is-hidden"),await S()}()})),document.getElementById("dMoreActiveTokens").addEventListener("click",(()=>S())),document.getElementById("btnMoreCollections").addEventListener("click",(()=>P()));var A=0;async function P(){document.getElementById("btnMoreCollections").classList.add("is-loading");let e=document.getElementById("dCollections"),a=0,n=new URLSearchParams(window.location.search).get("creator"),s=await v(n,15,A);if(document.getElementById("dCollectionsLoader").classList.add("is-hidden"),s){for(let o of s){if(a++,!n&&0===o.tokensCount)continue;let s=await h(o.address);if(s)try{s=JSON.parse(t(s))}catch(e){continue}const m=document.getElementById("t-collection").content.cloneNode(!0);let c=s?.imageUri;if(c){try{new URL(c),c=c.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}m.querySelector(".js-img").setAttribute("src",c)}m.querySelector(".js-name").innerText=s?.name,m.querySelector(".js-description").innerText=s?.description,m.querySelector(".js-address").prepend(document.createTextNode(r(o.address))),m.querySelector(".copy-item").addEventListener("click",(()=>{o.address&&i(o.address)&&bulmaToast.toast(T)})),m.querySelector(".js-count").innerText=o.tokensCount,m.querySelectorAll(".js-collection-item").forEach((function(e){e.setAttribute("href",window.location.pathname+"?cmd=tokens&cid="+o.address)})),e.append(m)}a<15?document.getElementById("dMoreCollections").classList.add("is-hidden"):document.getElementById("dMoreCollections").classList.remove("is-hidden"),document.getElementById("btnMoreCollections").classList.remove("is-loading"),0===(A+=a)&&(e.textContent="There are no on-chain tokens yet.")}else x()}document.getElementById("btnMoreTokens").addEventListener("click",(()=>k()));var L=0,b="";async function k(){document.getElementById("btnMoreTokens").classList.add("is-loading");let e,t=document.getElementById("dTokens"),r=0,i=new URLSearchParams(window.location.search);if(e=i.get("account")?await async function(e){let t="sort.desc=id&select=account,token,balance&balance.gt=0&token.standard=fa2"+(e.account?"&account="+e.account:"")+(e.limit?"&limit="+e.limit:"")+(e.offset?"&offset="+e.offset:"")+(e.onchain?"&token.metadata.artifactUri.as=data:*":"&token.metadata.artifactUri.null=false");try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens/balances?"+t);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get tokens")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}({account:i.get("account"),limit:20,offset:L,onchain:"false"!==i.get("onchain")}):await async function(e){let t="sort.desc=id&select=contract,tokenId,totalSupply,firstMinter,metadata&totalSupply.gt=0&standard=fa2"+(e.limit?"&limit="+e.limit:"")+(e.offset?"&offset="+e.offset:"")+(e.contract?"&contract.in="+e.contract:"")+(e.minter?"&firstMinter="+e.minter:"")+(e.name?"&metadata.name="+encodeURIComponent(e.name):"")+(e.onchain?"&metadata.artifactUri.as=data:"+(e.type?e.type:"")+"*":"&metadata.artifactUri.null=false");if(Array.isArray(e.creators)&&e.creators.length>0){e.creators.sort(),t+="&metadata.creators.as=*";for(let r of e.creators)t+='"'+r+'"*'}if(Array.isArray(e.tags)&&e.tags.length>0){e.tags.sort(((e,t)=>e.localeCompare(t))),t+="&metadata.tags.as=*";for(let r of e.tags)t+='"'+encodeURIComponent(r)+'"*'}try{let e=await fetch("https://api."+c+".tzkt.io/v1/tokens?"+t);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get tokens")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}({limit:20,offset:L,contract:i.get("cid"),name:i.get("name"),creators:i.getAll("creator"),tags:i.getAll("tag"),type:i.get("type"),minter:i.get("minter"),onchain:"false"!==i.get("onchain")}),document.getElementById("dTokensLoader").classList.add("is-hidden"),e){for(let i of e){r++;let e=i.token?i.token:i,a=await R(e);a&&t.append(a)}r<20?document.getElementById("dMoreTokens").classList.add("is-hidden"):document.getElementById("dMoreTokens").classList.remove("is-hidden"),document.getElementById("btnMoreTokens").classList.remove("is-loading"),0===(L+=r)&&(t.textContent="There are no on-chain tokens yet.")}else x()}async function R(e){if("0"===e.totalSupply)return null;let t;const i=document.getElementById("t-token").content.cloneNode(!0);let a=i.querySelector(".js-price");new Promise((t=>{setTimeout((()=>{t(Promise.all([E(e.contract.address,e.tokenId),a]))}),100)})).then((e=>{e[0]&&(e[1].innerText=(parseFloat(e[0].value.price)/1e6).toFixed(2),e[1].parentNode.classList.remove("is-hidden"))}));let n=e.metadata?.name;t=i.querySelector(".js-name"),t.innerText=n||"";let s=e.firstMinter?.address,o=e.firstMinter?.alias;if(n=e.metadata?.creators,!Array.isArray(n))try{n=JSON.parse(n)}catch(e){}let m=i.querySelector(".js-creator");if(Array.isArray(n)&&n.length>0){let e=s&&n.includes(s)?s:n[0],t=e!==s?r(n[0]):o||r(s),a=i.querySelector(".js-creators");n.length>1?a.querySelector(".js-creators-link").append(document.createTextNode("+"+(n.length-1)+"...")):a.remove(),m.querySelector(".js-creator-link").append(document.createTextNode(t)),m.querySelector(".js-creator-link").setAttribute("href",window.location.pathname+"?cmd=tokens&creator="+e),m.classList.remove("is-hidden")}else m.remove();if(n=e.totalSupply,t=i.querySelector(".js-count"),t.innerText=n||"",n=e.metadata?.thumbnailUri?e.metadata?.thumbnailUri:e.metadata?.displayUri?e.metadata?.displayUri:e.metadata?.artifactUri,n){try{new URL(n),n=n.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}let t=M(n);t||(t=e.metadata?.mimeType),t?t.startsWith("image")?(i.querySelector(".js-audio").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-img").setAttribute("src",n),i.querySelector(".js-img").classList.remove("is-hidden")):t.startsWith("audio")?(i.querySelector(".js-img").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-audio").setAttribute("src",n),i.querySelector(".js-audio").classList.remove("is-hidden")):t.startsWith("video")?(i.querySelector(".js-img").remove(),i.querySelector(".js-audio").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-video").setAttribute("src",n),i.querySelector(".js-video").classList.remove("is-hidden")):t.startsWith("text")?(i.querySelector(".js-img").remove(),i.querySelector(".js-audio").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-text").classList.remove("is-hidden")):(i.querySelector(".js-img").remove(),i.querySelector(".js-audio").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").classList.remove("is-hidden")):(i.querySelector(".js-audio").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-img").setAttribute("src",n),i.querySelector(".js-img").classList.remove("is-hidden"))}return i.querySelectorAll(".js-token-item").forEach((function(t){t.setAttribute("href",window.location.pathname+"?cmd=token&cid="+e.contract.address+"&tid="+e.tokenId)})),i}async function B(){let e=document.getElementById("dListings"),t=new URLSearchParams(window.location.search),r=t.get("seller"),i=t.get("minprice"),a=t.get("maxprice"),s=t.get("cid"),o=t.get("tid");document.getElementById("btnMoreListings").classList.add("is-loading");let m=0,d=await async function(e,t,r,i,a,s,o){let m="sort.desc=id&active=true&select=key,value&limit=15"+(o?"&offset="+o:"")+(e?"&value.seller="+e:"")+(t?"&value.price.ge="+t:"")+(r?"&value.price.le="+r:"")+(i?"&value.token.address="+i:"")+(a?"&value.token.id="+a:"");try{let e=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+l+"/bigmaps/offers/keys?"+m);if(e.ok)return await e.json();console.log("ERROR "+n()+"(): can't get offers")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}(r,i,a,s,o,0,L);if(document.getElementById("dListingsLoader").classList.add("is-hidden"),d){for(let t of d){m++;let r=await w(t);e.append(r)}m<15?document.getElementById("dMoreListings").classList.add("is-hidden"):document.getElementById("dMoreListings").classList.remove("is-hidden"),document.getElementById("btnMoreListings").classList.remove("is-loading"),0===(L+=m)&&(e.textContent="There are no listings matching these criteria.")}else x()}async function w(e){let t;const i=document.getElementById("t-listing").content.cloneNode(!0);let a=(await I(e.value.token.address,e.value.token.id)).token,s=a.metadata?.name;t=i.querySelector(".js-name"),t.innerText=s||"";let o=i.querySelector(".js-creators"),m=i.querySelector(".js-creator");s=a.metadata?.creators;try{s=JSON.parse(s);for(let e=0;e<s.length;e++)t=m.cloneNode(!0),t.setAttribute("href",window.location.pathname+"?cmd=tokens&creator="+s[e]),t.append(document.createTextNode(r(s[e]))),e>0&&o.append(document.createTextNode(", ")),t.classList.remove("is-hidden"),o.append(t)}catch(e){i.querySelector(".js-creators").innerText=""}if(m.remove(),s=new Date(Date.parse(e.value.time_start)).toLocaleString(),t=i.querySelector(".js-start-time"),t.innerText=s||"",s=e.value.time_expiry?new Date(Date.parse(e.value.time_expiry))?.toLocaleString():"...",t=i.querySelector(".js-expiry-time"),t.innerText=s||"",s=e.value.amount,t=i.querySelector(".js-amount"),t.innerText=s||"",s=(parseFloat(e.value.price)/1e6).toFixed(2),t=i.querySelector(".js-price"),t.innerText=s||"",s=a.metadata?.thumbnailUri?a.metadata?.thumbnailUri:a.metadata?.displayUri?a.metadata?.displayUri:a.metadata?.artifactUri,s){try{new URL(s),s=s.replace("ipfs://","https://ipfs.io/ipfs/")}catch(e){}let e=M(s);e||(e=a.metadata?.mimeType),e?e.startsWith("image")?(i.querySelector(".js-audio").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-img").setAttribute("src",s),i.querySelector(".js-img").classList.remove("is-hidden")):e.startsWith("audio")?(i.querySelector(".js-img").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-audio").setAttribute("src",s),i.querySelector(".js-audio").classList.remove("is-hidden")):e.startsWith("video")?(i.querySelector(".js-img").remove(),i.querySelector(".js-audio").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-video").setAttribute("src",s),i.querySelector(".js-video").classList.remove("is-hidden")):e.startsWith("text")?(i.querySelector(".js-img").remove(),i.querySelector(".js-audio").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-text").classList.remove("is-hidden")):(i.querySelector(".js-img").remove(),i.querySelector(".js-audio").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").classList.remove("is-hidden")):(i.querySelector(".js-audio").remove(),i.querySelector(".js-video").remove(),i.querySelector(".js-text").remove(),i.querySelector(".js-data").remove(),i.querySelector(".js-img").setAttribute("src",s),i.querySelector(".js-img").classList.remove("is-hidden"))}let c=i.querySelector(".js-btn-buy"),d=i.querySelector(".js-btn-cancel-offer");return e.value.seller===f?(c.classList.add("is-hidden"),d.classList.remove("is-hidden"),d.addEventListener("click",(()=>async function(e){let t=event.currentTarget,r=event.target.closest(".js-listing");t.classList.add("is-loading");let i=await async function(e){try{let t=await y.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:l,parameters:{entrypoint:"cancel_offer",value:JSON.parse('{ "int": "'+e+'" }')}}]});if(t.transactionHash)return t.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(e);i&&(F(i),r.remove()),t.classList.remove("is-loading")}(e.key)))):(d.classList.add("is-hidden"),c.classList.remove("is-hidden"),c.addEventListener("click",(()=>q(e.key,e.value.price)))),i.querySelectorAll(".js-token-item").forEach((function(e){e.setAttribute("href",window.location.pathname+"?cmd=token&cid="+a.contract.address+"&tid="+a.tokenId)})),i}function N(){document.getElementById("nftType").value="",document.getElementById("nftFileName").innerHTML="Choose a file ...",document.getElementById("nftFileSizeIcon").classList.add("is-hidden"),document.getElementById("nftFileSize").innerHTML="&nbsp;";const e=document.getElementById("nftPreviewContainer");e.querySelector(".js-text").classList.add("is-hidden"),e.querySelector(".js-data").classList.add("is-hidden");let t=e.querySelector(".js-audio");t.classList.contains("is-hidden")||(t.classList.add("is-hidden"),t.setAttribute("src","")),t=e.querySelector(".js-video"),t.classList.contains("is-hidden")||(t.classList.add("is-hidden"),t.setAttribute("src","")),t=e.querySelector(".js-svg"),t&&t.remove(),t=e.querySelector(".js-img"),t.setAttribute("src",""),t.classList.remove("is-hidden")}document.getElementById("btnMoreListings").addEventListener("click",(()=>B())),document.getElementById("btnSearch").addEventListener("click",(()=>async function(){let e="";if(document.getElementById("searchListTab").classList.contains("is-active")){let t,r,i=document.getElementById("searchListMinPrice").value;if(i){if(i=Math.round(parseFloat(i)*10**6),Number.isNaN(i)||i<=0)return void bulmaToast.toast({message:"Invalid min price.",type:"is-danger"});t=i,e+="&minprice="+i}if(i=document.getElementById("searchListMaxPrice").value,i){if(i=Math.round(parseFloat(i)*10**6),Number.isNaN(i)||i<=0)return void bulmaToast.toast({message:"Invalid max price.",type:"is-danger"});r=i,e+="&maxprice="+i}if(t&&r&&t>r)return void bulmaToast.toast({message:"Invalid price range.",type:"is-danger"});if(i=document.getElementById("searchListAddress").value.trim(),i){if(!a(i))return void bulmaToast.toast({message:"Invalid token or collection address.",type:"is-danger"});e+="&cid="+i}if(i=document.getElementById("searchListSeller").value.trim(),i){if(!a(i))return void bulmaToast.toast({message:"Invalid seller address.",type:"is-danger"});e+="&seller="+i}window.location.search="cmd=listings"+e}else if(document.getElementById("searchColTab").classList.contains("is-active")){let t=document.getElementById("searchColCreator").value.trim();if(t){if(!a(t))return void bulmaToast.toast({message:"Invalid creator address.",type:"is-danger"});e+="&creator="+t}window.location.search="cmd=collections"+e}else if(document.getElementById("searchTokTab").classList.contains("is-active")){let t=document.getElementById("searchTokName").value.trim();if(t){if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});e+="&name="+encodeURIComponent(t)}t=document.getElementById("searchTokCreators").value.trim().split(/\s*,\s*/).filter((e=>e.length>0));for(let r of t){if(!a(r))return void bulmaToast.toast({message:"Invalid creator address: "+r,type:"is-danger"});e+="&creator="+r.trim()}t=document.getElementById("searchTokTags").value.trim().split(/\s*,\s*/).filter((e=>e.length>0));for(let r of t){if(r.length<3)return void bulmaToast.toast({message:"The tag length must be more than 2 characters.",type:"is-danger"});e+="&tag="+encodeURIComponent(r.trim())}if(t=document.getElementById("searchTokType").value.trim(),t&&(e+="&type="+t),t=document.getElementById("searchTokMinter").value.trim(),t){if(!a(t))return void bulmaToast.toast({message:"Invalid minter address.",type:"is-danger"});e+="&minter="+t}!1===document.getElementById("searchOnchainOnly")?.checked&&(e+="&onchain=false"),window.location.search="cmd=tokens"+e}}())),document.getElementById("btnNewCollectionCreate").addEventListener("click",(()=>async function(){let t,r=new Map;if(t=document.getElementById("cName").value.trim(),!t)return void bulmaToast.toast({message:"The collection name must not be empty.",type:"is-danger"});if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});if(r.set("name",t),t=document.getElementById("cDescription").value.trim(),t){if(t.length>2e3)return void bulmaToast.toast({message:"The description length must be less than 2000 characters.",type:"is-danger"});r.set("description",t)}if(t=document.getElementById("cSymbol").value.trim(),t&&r.set("symbol",t),t=document.getElementById("cType").value.trim(),t&&r.set("type",t),t=document.getElementById("cInterfaces").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0&&r.set("interfaces",t),t=document.getElementById("cAuthors").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0&&r.set("authors",t),t=document.getElementById("cAddresses").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!a(e))return void bulmaToast.toast({message:"Invalid author address: "+e,type:"is-danger"});t.sort(),r.set("authoraddress",t)}if(t=document.getElementById("cCreators").value.split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!a(e))return void bulmaToast.toast({message:"Invalid creator address: "+e,type:"is-danger"});t.sort(),r.set("creators",t)}const i=document.getElementById("cFile").files;i.length>0&&(t=await new Promise((e=>{let t=new FileReader;t.onload=r=>e(t.result),t.readAsDataURL(i[0])})),r.set("imageUri",t)),document.getElementById("btnNewCollectionCreate").classList.add("is-loading");let s=await async function(t){let r=t.size>0?e(JSON.stringify(Object.fromEntries(t))):"";try{let e;if(g)e=g;else{let t=await fetch("./user_collection.json");t.ok&&(e=await t.text())}if(e){e=e.replaceAll("${user_address}",f),e=e.replaceAll("${metadata_content}",r);const t=await y.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.ORIGINATION,balance:"0",script:JSON.parse(e)}]});if(t.transactionHash)return t.transactionHash}else console.log("ERROR "+n()+"(): can't create collection")}catch(e){console.log("ERROR "+n()+"(): "+e+JSON.stringify(e))}}(r);s&&F(s),document.getElementById("btnNewCollectionCreate").classList.remove("is-loading")}())),document.getElementById("cFile").addEventListener("change",(()=>function(){const e=document.getElementById("cFile"),t=document.getElementById("cFileImage"),r=document.getElementById("cFileSizeIcon");if(r.classList.add("is-hidden"),e.files.length>0){let i=e.files[0];document.getElementById("cFileName").innerHTML=i.name;let a="0 Bytes";if(i.size>0){let e=["Bytes","KB","MB","GB","TB"],t=Math.floor(Math.log(i.size)/Math.log(1024));a=parseFloat((i.size/Math.pow(1024,t)).toFixed(2))+" "+e[t],i.size>10240&&(r.classList.remove("is-hidden"),r.classList.remove("has-text-danger"),r.classList.add("has-text-warning"),i.size>15360?(r.classList.remove("has-text-warning"),r.classList.add("has-text-danger"),bulmaToast.toast({message:"This file is big. Try to make it smaller.",type:"is-danger"})):bulmaToast.toast({message:"Likely this file is big. Try to make it smaller.",type:"is-warning"}))}document.getElementById("cFileSize").innerHTML=a;let n=new FileReader;n.readAsDataURL(i),n.onload=e=>{t.setAttribute("src",e.target.result)}}else document.getElementById("cFileSize").innerHTML="&nbsp;",document.getElementById("cFileName").innerHTML="Choose a file ...",t.setAttribute("src","")}())),document.getElementById("cFileRemove").addEventListener("click",(()=>(document.getElementById("cFile").value="",document.getElementById("cFileSizeIcon").classList.add("is-hidden"),document.getElementById("cFileSize").innerHTML="&nbsp;",document.getElementById("cFileName").innerHTML="Choose a file ...",void document.getElementById("cFileImage").setAttribute("src","")))),document.getElementById("btnNewTokenCreate").addEventListener("click",(()=>async function(){let t,r=new Map,i=document.getElementById("nftCollection").value;if(!i)return void bulmaToast.toast({message:"Collection must be selected.",type:"is-danger"});if(t=document.getElementById("nftName").value.trim(),t){if(t.length>200)return void bulmaToast.toast({message:"The name length must be less than 200 characters.",type:"is-danger"});r.set("name",t)}if(t=document.getElementById("nftDescription").value.trim(),t){if(t.length>200)return void bulmaToast.toast({message:"The description length must be less than 2000 characters.",type:"is-danger"});r.set("description",t)}if(t=document.getElementById("nftTags").value.trim().split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(e.length<3)return void bulmaToast.toast({message:"The tag length must be more than 2 characters.",type:"is-danger"});t.sort(((e,t)=>e.localeCompare(t))),r.set("tags",t)}if(t=document.getElementById("nftCreators").value.trim().split(/\s*,\s*/).filter((e=>e.length>0)),t.length>0){for(let e of t)if(!a(e))return void bulmaToast.toast({message:"Invalid creator address: "+e,type:"is-danger"});t.sort(),r.set("creators",t)}t=document.getElementById("nftType").value.trim(),t&&r.set("mimeType",t),t=document.getElementById("nftRights").value.trim(),t&&r.set("rights",t),t=document.getElementById("nftDecimals").value.trim(),t&&r.set("decimals",t);let s=new Map,o=0,m=document.getElementById("pageNewToken").querySelectorAll(".js-royalties-line-data");for(let e of m){let t=e.querySelector(".js-royalties-data-address").value.trim();if(0===t.length)return void bulmaToast.toast({message:"The royalty address must not be empty.",type:"is-danger"});if(!a(t))return void bulmaToast.toast({message:"Invalid royalty address: "+t,type:"is-danger"});if(s.has(t))return void bulmaToast.toast({message:"The royalty addresses must be different.",type:"is-danger"});let r=e.querySelector(".js-royalties-data-value").value;try{r=Math.round(100*parseFloat(r))}catch(e){return void bulmaToast.toast({message:"The royalty value must be a number.",type:"is-danger"})}if(r<=0)return void bulmaToast.toast({message:"The royalty value must be greater than zero.",type:"is-danger"});if(o+=r,o>2500)return void bulmaToast.toast({message:"The maximum amount of the total royalty shall not exceed 25%.",type:"is-danger"});s.set(t,r)}s.size>0&&(t='{"decimals":4,"shares":'+JSON.stringify(Object.fromEntries(s))+"}",r.set("royalties",t));const d=document.getElementById("nftFile").files;if(!(d.length>0))return void bulmaToast.toast({message:"Media file must be selected.",type:"is-danger"});t=await new Promise((e=>{let t=new FileReader;t.onload=r=>e(t.result),t.readAsDataURL(d[0])})),r.set("artifactUri",t);let l=new Map,p=document.getElementById("pageNewToken").querySelectorAll(".js-attributes-line-data");for(let e of p){let t=e.querySelector(".js-attributes-data-name").value.trim();if(0===t.length)return void bulmaToast.toast({message:"The attribute name must not be empty.",type:"is-danger"});if(l.has(t))return void bulmaToast.toast({message:"The attribute names must be different.",type:"is-danger"});let r=e.querySelector(".js-attributes-data-value").value;l.set(t,r)}if(l.size>0){let e="[",t=!0;for(let[r,i]of l)t?t=!1:e+=",",e+='{"name":"'+r+'","value":"'+i+'"}';e+="]",r.set("attributes",e)}let g=document.getElementById("nftEditions").value;document.getElementById("btnNewTokenCreate").classList.add("is-loading");let u=await async function(t,r,i){let a="";if((i=new Map([...i].sort())).size>0){let t=!0;for(let[r,n]of i)t?t=!1:a+=",",a+='{"prim":"Elt","args":[{"string":"'+r+'"},{"bytes":"'+e("string"==typeof n||n instanceof String?n:JSON.stringify(n))+'"}]}'}let s='{"string":"'+f+'"}',o='{"int":"'+r+'"}',m="["+a+"]",d=[];try{let e='{"prim":"Pair","args":[${0},{"prim":"Pair","args":[${1},${2}]}]}';try{let r=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+t+"/entrypoints/mint"),i=await r.json();2===Object.keys(i.jsonParameters["schema:object"]).length&&(e='{"prim":"Pair","args":[${0},${1}]}');for(let e of Object.keys(i.jsonParameters["schema:object"]))e.endsWith(":address")?d.push(s):e.endsWith(":nat")?d.push(o):e.endsWith(":map_flat:string:bytes")&&d.push(m)}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}for(let t=0;t<d.length;t++)e=e.replace("${"+t+"}",d[t]);let r=await y.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:t,parameters:{entrypoint:"mint",value:JSON.parse(e)}}]});if(r.transactionHash)return r.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(i,g,r);u&&F(u),document.getElementById("btnNewTokenCreate").classList.remove("is-loading")}())),document.getElementById("nftFile").addEventListener("change",(()=>function(){const e=document.getElementById("nftFile");if(N(),e.files.length>0){let t=e.files[0];document.getElementById("nftFileName").innerHTML=t.name;let r="0 Bytes";if(t.size>0){const e=document.getElementById("nftFileSizeIcon");let i=["Bytes","KB","MB","GB","TB"],a=Math.floor(Math.log(t.size)/Math.log(1024));r=parseFloat((t.size/Math.pow(1024,a)).toFixed(2))+" "+i[a],t.size>20480&&(e.classList.remove("has-text-danger"),e.classList.add("has-text-warning"),e.classList.remove("is-hidden"),t.size>28672?(e.classList.remove("has-text-warning"),e.classList.add("has-text-danger"),bulmaToast.toast({message:"This file is big. Try to make it smaller.",type:"is-danger"})):bulmaToast.toast({message:"Likely this file is big. Try to make it smaller.",type:"is-warning"}))}document.getElementById("nftFileSize").innerHTML=r;let i=t.type;document.getElementById("nftType").value=i;let a=new FileReader;a.onload=e=>{let t=e.target.result;const r=document.getElementById("nftPreviewContainer");if(i)if(r.querySelector(".js-img").classList.add("is-hidden"),i.startsWith("image"))if(i.startsWith("image/svg+xml")){let e=r.querySelector(".js-svg-template").cloneNode(!0);e.classList.remove("js-svg-template"),e.classList.add("js-svg"),e.setAttribute("data",t),r.append(e),e.classList.remove("is-hidden")}else r.querySelector(".js-img").setAttribute("src",t),r.querySelector(".js-img").classList.remove("is-hidden");else i.startsWith("audio")?(r.querySelector(".js-audio").setAttribute("src",t),r.querySelector(".js-audio").classList.remove("is-hidden")):i.startsWith("video")?(r.querySelector(".js-video").setAttribute("src",t),r.querySelector(".js-video").classList.remove("is-hidden")):i.startsWith("text")?r.querySelector(".js-text").classList.remove("is-hidden"):r.querySelector(".js-data").classList.remove("is-hidden");else r.querySelector(".js-img").setAttribute("src",t)},a.readAsDataURL(t)}}())),document.getElementById("nftFileRemove").addEventListener("click",(()=>(document.getElementById("nftFile").value="",void N()))),document.getElementById("btnTokenList").addEventListener("click",(()=>async function(){U&&document.getElementById("mListTokenAmount").setAttribute("max",U.balance),document.getElementById("mListToken").classList.add("is-active")}())),document.getElementById("btnListTokenList").addEventListener("click",(()=>async function(){if(!U)return void bulmaToast.toast({message:"The token is not found.",type:"is-danger"});let e=Math.round(parseFloat(document.getElementById("mListTokenPrice").value)*10**6);if(Number.isNaN(e)||e<=0)return void bulmaToast.toast({message:"Invalid price.",type:"is-danger"});let t,r=U.token.contract.address,i=U.token.tokenId,a=document.getElementById("mListTokenAmount").value;try{let e=JSON.parse(U.token.metadata.royalties);t=new Map(Object.entries(e.shares));let r=e.decimals;for(let[e,i]of t)t.set(e,Math.trunc(Number(i)/10**r*1e4))}catch(e){t=new Map}let s=document.getElementById("mListTokenStartTiime").value;s=Math.trunc(Date.parse(s)/1e3),s||(s=Math.trunc(Date.now()/1e3));document.getElementById("btnListTokenList").classList.add("is-loading");let o=await async function(e,t,r,i,a,s,o){let m="";if(a&&a.size>0){a=new Map([...a].sort());let e=0;for(let[t,r]of a)e>0&&(m+=","),e++,m+='{"prim":"Elt","args":[{"string":"'+t+'"},{"int":"'+r+'"}]}'}o=o?'"prim":"Some","args":[{"int":"'+o+'"}]':'"prim":"None"';try{let a=await y.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:t,parameters:{entrypoint:"update_operators",value:JSON.parse('[ { "prim": "Left", "args": [ { "prim": "Pair", "args": [ { "string": "'+f+'" }, { "prim": "Pair", "args": [ { "string": "'+l+'" }, { "int": "'+r+'" } ] } ] } ] } ]')}},{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:l,parameters:{entrypoint:"add_offer",value:JSON.parse('{"prim":"Pair","args":[{"prim":"Pair","args":[{"int":"'+i+'"},{"prim":"Pair","args":[{"int":"'+e+'"},['+m+']]}]},{"prim":"Pair","args":[{'+o+'},{"prim":"Pair","args":[{"int":"'+s+'"},{"prim":"Pair","args":[{"string":"'+t+'"},{"int":"'+r+'"}]}]}]}]}')}}]});if(a.transactionHash)return a.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(e,r,i,a,t,s,"");o&&(F(o),document.getElementById("mListToken").classList.remove("is-active")),document.getElementById("btnListTokenList").classList.remove("is-loading")}())),document.getElementById("btnTokenBurn").addEventListener("click",(()=>async function(){U&&document.getElementById("mBurnTokenAmount").setAttribute("max",U.balance),document.getElementById("mBurnToken").classList.add("is-active")}())),document.getElementById("btnBurnTokenBurn").addEventListener("click",(()=>async function(){document.getElementById("btnBurnTokenBurn").classList.add("is-loading");let e=document.getElementById("mBurnTokenAmount").value,t=await async function(e,t,r){try{let i='{"prim":"Pair","args":[{"int":"'+r+'"},{"int":"'+t+'"}]}';try{let r=await fetch("https://api."+c+".tzkt.io/v1/contracts/"+e+"/entrypoints/burn?json=false&michelson=true");(await r.json()).michelsonParameters.startsWith("pair")||(i='{"int":"'+t+'"}')}catch(e){}let a=await y.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:e,parameters:{entrypoint:"burn",value:JSON.parse(i)}}]});if(a.transactionHash)return a.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(b,j,e);t&&(F(t),window.history.back()),document.getElementById("btnBurnTokenBurn").classList.remove("is-loading")}())),document.getElementById("btnTokenTransfer").addEventListener("click",(()=>async function(){U&&document.getElementById("mTransferTokenAmount").setAttribute("max",U.balance),document.getElementById("mTransferTokenAddressTo").value="",document.getElementById("mTransferToken").classList.add("is-active")}())),document.getElementById("btnTransferTokenTransfer").addEventListener("click",(()=>async function(){let e=document.getElementById("mTransferTokenAmount").value,t=document.getElementById("mTransferTokenAddressTo").value.trim();if(!a(t))return void bulmaToast.toast({message:"Invalid destination address.",type:"is-danger"});document.getElementById("btnTransferTokenTransfer").classList.add("is-loading");let r=await async function(e,t,r,i){try{let a=await y.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:0,destination:e,parameters:{entrypoint:"transfer",value:JSON.parse('[{"prim": "Pair","args":[{"string":"'+f+'"},[{"prim": "Pair","args":[{"string":"'+i+'"},{"prim": "Pair","args":[{"int":"'+t+'"},{"int":"'+r+'"}]}]}]]}]')}}]});if(a.transactionHash)return a.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(b,j,e,t);r&&(F(r),document.getElementById("mTransferToken").classList.remove("is-active")),document.getElementById("btnTransferTokenTransfer").classList.remove("is-loading")}()));var U,j="";async function q(e,t){let r=event.currentTarget;r.classList.add("is-loading");let i=await async function(e,t,r){try{let t=await y.requestOperation({operationDetails:[{kind:beacon.TezosOperationType.TRANSACTION,amount:1*r,destination:l,parameters:{entrypoint:"accept_offer",value:JSON.parse('{"prim":"Pair","args":[{"int":"1"},{"int":"'+e+'"}]}')}}]});if(t.transactionHash)return t.transactionHash}catch(e){console.log("ERROR "+n()+"(): "+e+" "+JSON.stringify(e))}}(e,0,t);i&&F(i),r.classList.remove("is-loading")}function D(){let e=event.currentTarget.querySelector(".fas");event.currentTarget.parentElement.querySelector(".is-collapsible").classList.toggle("is-active"),e.classList.toggle("fa-angle-down"),e.classList.toggle("fa-angle-up")}async function O(e){let t=f;await async function(e){let t=await y.getActiveAccount();if(t)f=t.address;else if(!e){let e=await y.requestPermissions({network:{type:c}});f=e.address}}(e),f&&(document.getElementById("divConnect").classList.add("is-hidden"),document.getElementById("aAddress").innerHTML=r(f),document.getElementById("divDisconnect").classList.remove("is-hidden")),e||t===f||window.location.reload()}function C(){document.querySelectorAll(".js-page").forEach((function(e){e.classList.add("is-hidden")}))}function M(e){return e&&e.startsWith("data:")?e.startsWith("data:image/svg+xml")?"image/svg+xml":e.startsWith("data:image")?"image":e.startsWith("data:text")?"text":e.startsWith("data:audio")?"audio":e.startsWith("data:video")?"video":"data":""}function F(e){bulmaToast.toast({message:"Your request is processing with ID <a href='https://"+c+".tzkt.io/"+e+"' target='_blank'>"+r(e)+"</a>",duration:5e3,type:"is-success"})}function x(){bulmaToast.toast({message:"The data cannot be retrieved at this moment.<br/>Please try again later.",duration:7e3,type:"is-warning"})}document.querySelectorAll(".js-faq-item").forEach((function(e){e.onclick=D})),document.getElementById("btnConnect").addEventListener("click",(()=>O(!1))),document.getElementById("btnDisconnect").addEventListener("click",(()=>async function(){await async function(){await y.clearActiveAccount(),f=""}(),f||(document.getElementById("divDisconnect").classList.add("is-hidden"),document.getElementById("aAddress").innerHTML="",document.getElementById("divConnect").classList.remove("is-hidden")),window.location.reload()}())),document.getElementById("btnMenuTokens").addEventListener("click",(()=>{window.location.search="cmd=tokens"})),document.getElementById("btnMenuCollections").addEventListener("click",(()=>{window.location.search="cmd=collections"})),document.getElementById("btnMenuListings").addEventListener("click",(()=>{window.location.search="cmd=listings"})),document.getElementById("btnMenuSearch").addEventListener("click",(()=>{window.location.search="cmd=search"})),document.getElementById("btnMenuNewToken").addEventListener("click",(()=>{window.location.search="cmd=newtoken"})),document.getElementById("btnMenuNewCollection").addEventListener("click",(()=>{window.location.search="cmd=newcollection"})),document.getElementById("btnMenuInfo").addEventListener("click",(()=>{window.location.search="cmd=info"})),document.getElementById("btnMenuCopyAddress").addEventListener("click",(()=>{f&&i(f)&&bulmaToast.toast(T)})),document.getElementById("btnMenuMyCollections").addEventListener("click",(()=>{window.location.search="cmd=collections&creator="+f})),document.getElementById("btnMenuMyTokens").addEventListener("click",(()=>{window.location.search="cmd=tokens&account="+f})),document.getElementById("btnMenuMyListings").addEventListener("click",(()=>{window.location.search="cmd=listings&seller="+f})),LT={}})();